[[linux]]

Cgroups (control groups) — это функция в Linux, которая позволяет ограничивать, отслеживать и управлять ресурсами, используемыми процессами или группами процессов. Cgroups являются важной частью управления ресурсами в современных системах, особенно в контексте контейнеров и виртуализации. 

### Основные характеристики cgroups:

1. Ограничение ресурсов: Cgroups позволяют ограничивать использование ресурсов, таких как:
   - Процессор (CPU)
   - Память (RAM)
   - Диск (I/O)
   - Сетевые ресурсы

   Это позволяет обеспечивать справедливое распределение ресурсов между разными процессами и предотвращать их злоупотребление.

2. Мониторинг: Cgroups обеспечивают возможность отслеживания использования ресурсов процессами. Вы можете видеть, сколько ресурсов используется каждой группой процессов, что полезно для диагностики и оптимизации работы системы.

3. Изоляция: Cgroups могут использоваться вместе с пространствами имен (namespaces) для создания изолированных сред, таких как контейнеры. Это позволяет запускать приложения в контролируемой и защищенной среде.

4. Гибкость: Cgroups поддерживают создание иерархий, что позволяет создавать вложенные группы процессов с собственными лимитами и политиками.

### Применение cgroups:

- Работа с контейнерами: Cgroups являются основой для управления ресурсами в контейнерных технологиях, таких как Docker и Kubernetes. Они позволяют ограничивать ресурсы, выделяемые каждому контейнеру, что улучшает стабильность и безопасность приложений.

- Системная администрация: Администраторы могут использовать cgroups для управления нагрузкой на сервер и обеспечения оптимального использования ресурсов.

### Примеры команд:

- Для создания нового cgroup и установки ограничений на использование процессора (например, 50% от CPU):
  ```bash
  sudo cgcreate -g cpu:/mygroup
  echo 50000 > /sys/fs/cgroup/cpu/mygroup/cpu.cfs_quota_us
  ```

- Запуск процесса в рамках cgroup:
  ```bash
  sudo cgexec -g cpu:/mygroup my_command
  ```